{"ast":null,"code":"import _slicedToArray from\"C:/Users/user/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{api}from'../utils/api';import Card from'./Card';import CurrentUserContext from'../contexts/CurrentUserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Main(props){var user=React.useContext(CurrentUserContext);var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),cards=_React$useState2[0],setCards=_React$useState2[1];React.useEffect(function(){api.getInitialCards().then(function(res){setCards(res);}).catch(function(err){console.log(err);});},[]);function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===user._id;});api.putLike(card._id,isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==card._id;});});});}return/*#__PURE__*/_jsxs(\"main\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile__info\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"profile__avatar\",src:user.avatar,alt:\"\\u0410\\u0432\\u0430\\u0442\\u0430\\u0440 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"profile__button-background\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"profile__edit-avatar\",\"aria-label\":\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",onClick:props.onEditAvatar})}),/*#__PURE__*/_jsx(\"h1\",{className:\"profile__name\",children:user.name}),/*#__PURE__*/_jsx(\"p\",{className:\"profile__role\",children:user.about}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"profile__edit-button\",\"aria-label\":\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",onClick:props.onEditProfile})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"profile__add-button\",onClick:props.onAddPlace})]}),/*#__PURE__*/_jsx(\"section\",{className:\"elements\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"elements__list\",children:cards.map(function(item){return/*#__PURE__*/_jsx(Card,{card:item,onCardClick:props.onCardClick,onCardLike:handleCardLike,onCardDelete:handleCardDelete},item._id);})})})]});}export default Main;","map":{"version":3,"sources":["C:/Users/user/dev/mesto-react/src/components/Main.js"],"names":["React","api","Card","CurrentUserContext","Main","props","user","useContext","useState","cards","setCards","useEffect","getInitialCards","then","res","catch","err","console","log","handleCardLike","card","isLiked","likes","some","i","_id","putLike","newCard","state","map","c","handleCardDelete","deleteCard","filter","avatar","onEditAvatar","name","about","onEditProfile","onAddPlace","item","onCardClick"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { api } from '../utils/api';\r\nimport Card from './Card';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction Main(props) {\r\n    const user = React.useContext(CurrentUserContext);\r\n    const [cards, setCards] = React.useState([])\r\n\r\n    React.useEffect(() => {\r\n        api.getInitialCards()\r\n        .then(res => {\r\n            setCards(res)\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n        })\r\n    }, [])\r\n\r\n    function handleCardLike(card) {\r\n        const isLiked = card.likes.some(i => i._id === user._id);\r\n        api.putLike(card._id, isLiked)\r\n        .then((newCard) => {\r\n            setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\r\n        });\r\n    }\r\n\r\n    function handleCardDelete(card) {\r\n        api.deleteCard(card._id)\r\n        .then(() => {\r\n            setCards((state) => state.filter(c => c._id !== card._id));\r\n        });\r\n    }\r\n\r\n    return (\r\n        <main className=\"content\">\r\n            <section className=\"profile\">\r\n                <div className=\"profile__info\">\r\n                    <img className=\"profile__avatar\" src={user.avatar} alt=\"Аватар профиля\" />\r\n                    <div className=\"profile__button-background\">\r\n                        <button type=\"button\" className=\"profile__edit-avatar\" aria-label=\"Редактировать аватар\" onClick={props.onEditAvatar}></button>\r\n                    </div> \r\n                    <h1 className=\"profile__name\">{user.name}</h1>\r\n                    <p className=\"profile__role\">{user.about}</p>\r\n                    <button type=\"button\" className=\"profile__edit-button\" aria-label=\"Редактировать профиль\" onClick={props.onEditProfile}></button>\r\n                </div>\r\n                <button type=\"button\" className=\"profile__add-button\" onClick={props.onAddPlace}></button>\r\n            </section>\r\n\r\n            <section className=\"elements\">\r\n                <ul className=\"elements__list\">\r\n                    {cards.map((item) => {\r\n                        return (\r\n                            <Card key={item._id} card={item} onCardClick={props.onCardClick} onCardLike={handleCardLike} onCardDelete={handleCardDelete}/>\r\n                        )\r\n                    })}\r\n                </ul>\r\n            </section>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default Main"]},"metadata":{},"sourceType":"module"}